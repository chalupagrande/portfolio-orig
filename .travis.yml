language: node_js
env:
  global:
    secure: lvr32eZXNavEIohr21kahk2O0qyAqNU5qFyQ/33OhanEgj4ZUmyYTpzYkE24szUYMLWD3V6QZoIkFLeaQ5ERxQ9JMKmhsCXPqGSh/rCL6oFMaibbUsHxH8H0pbIzkoVzFNmRwPI0astPGmVq+y/ouSOvS7pLUydk6IEc7C6w2YrOhD7uRAO1oyNyBGEft+s3g5OOEoRUYwJ1lVRCEVYcgdPKZizNuKODZysBHkXhyrF5fKxP6g8hiLWkPJM1j98JrBMEyuN7/oOFloMfcsj/uGVYQ9iL9L11O8q2TC4NwR4VGn2w8zurBzcLDVs8LL4WlJkUopHtaUct47t8jsiok4tFhiY50YSVQbG0wVX23+Nj0kjvxhwSp60s/oQU7wZxulaPD86apOwK9andir/C+SXPod6B28bnSPEJ7rmyCo4n5jF+XBCQ76q454YnJqagEmomhV+D0EoY4Sh36aF4ZxonQ0m9XQhhSbCwzeqtRbOZk0ROeMRs3SAupHgDMP2Kypnugkmwzf8Z9IENrAQUGvQhdlk3Nwn8esu8TejWv6xCvkzwHM/NulYlIxAOppWNTlf70O7dMojFcMxssEL4d7owHMh+k4roCGgj/sGEr3dhEZ0NH6bXGwwKFi9U8TNYPpMz4Qa58V/vidvukRhqW39Q1rq1jnQWgK2P4fSpQoo=
jobs:
  include:
    - stage: build & deploy
      before_script:
        - bash scripts/travisPrepForDeployment.sh
        - bash scripts/testVars.sh
        - echo $EMAIL
      script: yarn build
      before_deploy:
        - echo $EMAIL
        - git config user.email $EMAIL
        - git config user.name "Jamie"
        - git add --force build
      deploy:
        provider: elasticbeanstalk
        access_key_id:
          secure: "V9n1eMSagxC6T4VaRVYUxuRHqi7T1hPOAV0gNhOIBrg7fATqTYvu2zD04i0oqRWJwSSV3KbMR335kmVHL5vw+pl+TKEZriUNh3E9IDt0MrhD5r/t67ZRkKVNuP5d6ikWVv070qav58G9bKwcty+10iJzwkft9eeqKHgJGW9KqYwnEiywrnXeVftAXjbE531qqjWkR1/MAOOemM4vegnqSzl5W7MK7j3C5AATdTdaeAzr1r56ibQ2pJ2u5Rg/9i3ngyXJ7PdcV9jMjIqC2kNHKESZO57VsJgPO3CaKWLC0Hz6STlKZKvyhCayJBfNbr6Rnxc7ba2GOvKCe/KrtXsAYgtmqwtuHFd3MKHTkLfPU6FQtzMgDqEYIL9UMp8Xr8Mh3kPgd2s1dWTgU2iCBoSzPSYFtEySAN/RxzrfTBuIo+WTYEn4Yjz72C1WuKtJ8A3ELM8YClxxOwEHu4ykctQFp2rJSrFkkOST/1ySr7X4r1YTzp5m9yLIjiTpgdPgJ2VBxscOHA8oSvC/zsNGlC21h+zyzNdj4mo2ET7nd+20vS6J/M0fJ4AKrE6H6GoSUdZhvseZSrJF2M7N29AokmLNBBNo/aip6wyVVbqGs1+ABT/g4U2uJydK0/C+xKC8DbCZemq5P4LZ8GiiBexQUghp6ZeTnN8b40X+8pBaBMt/g54="
        secret_access_key:
          secure: "R6Wtg0Ax2X1NzlUV8P03+GsFF34K/vKTCRoTfbvmcGJ5ZAvAGN8zM/wgvMPtk5nxswLRxi54bNQjSNTqxInTkd8HIKcC6t+6TTZnGNU4bTPUtPeIetM/hyOdecG7KsHNlrqaAaqPLUwXcOf6xQ6e0geGNbUD8HiXXF5wnHC5ftI2CnoLAd3ieLVnbkkkniCZTYrBgNmLDAo6d9k3C2oSedTc876rAUJ/LT+vDtqWcnBHtumt6CK5hkbnjmWYHBLWVBW0JrqKmRb5njv7jrzZmcVXG++CcwTStoSH+UEqskWfJ9+mENjtEUbQIXi5lNrL7Y9Am+Xkb7EK3XZ90yzdGqJfW9NS9VTB8M8Yp/yV8HouANfx6sfIHTeS8FeJViJfRGBCL9vtVhDucyhrMBdd0tVw1jU6bdxfBr7zE+qn+VGinfhF7HeJYGivVzpVS6lOsDpB9Op9R+2p1+qN26r/jXGyFRwPx7vWkWmqiVZHmW+Cuueavq5FAD8BYMn31RagWgB/Ntcq6ojXhTiWFU41BS13DWMkPTXDV59ruGCcEj+ZAC+h7YBIAHAmLbNuSZMGCv/EpvWDkl8TsrXuX3Mib2A6T1C+cS7iSZOQKHwFPYCTWaUY+nToneycu9VBqdTkp3su1fNrenIxrWIWGcJEO1iAvWB+J9WhbyvWm1wd65A="
        region: us-east-2
        app: portfolio
        env: Portfolio-env
        bucket_name: 'elasticbeanstalk-us-east-2-708373466372'
        bucket_path: 'applications'
        skip_cleanup: true
        on:
          repo: ninth-mind/portfolio
